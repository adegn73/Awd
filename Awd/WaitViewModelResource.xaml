<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:system="clr-namespace:System;assembly=mscorlib"
                    xmlns:local="clr-namespace:Awd">
    
    <DataTemplate DataType="{x:Type local:WaitViewModel}">
        <Border Background="#AA000000">
            <Grid Margin="0">
                <Canvas x:Name="LayoutRoot" Width="100" Height="100">
                    <Canvas.RenderTransform>
                        <RotateTransform  CenterX="50" CenterY="50"/>
                    </Canvas.RenderTransform>

                    <Canvas.Triggers>
                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="RenderTransform.Angle" From="0" To="360" RepeatBehavior="Forever"
                                            Duration="0:0:2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Canvas.Triggers>
                    <ItemsControl ItemsSource="{x:Static local:WaitSpinner.Spinner}">
                        <ItemsControl.OpacityMask>
                            <RadialGradientBrush>
                                <GradientStop Color="Transparent" Offset="0.85"/>
                                <GradientStop Color="White" Offset="0.849"/>
                                <GradientStop Color="White" Offset="0.601"/>
                                <GradientStop Color="Transparent" Offset="0.6"/>
                            </RadialGradientBrush>
                        </ItemsControl.OpacityMask>
                        <ItemsControl.Template>
                            <ControlTemplate TargetType="{x:Type ItemsControl}">
                                <ItemsPresenter/>
                            </ControlTemplate>
                        </ItemsControl.Template>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Canvas/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Canvas Width="1" Height="1">
                                    <Canvas.RenderTransform>
                                        <RotateTransform Angle="{Binding [0]}" CenterX="50" CenterY="50"/>
                                    </Canvas.RenderTransform>
                                    <Viewport3D Width="100" Height="100">
                                        <Viewport3D.Camera>
                                            <OrthographicCamera Position="0.5 0.5 1" LookDirection="0 0 -1" UpDirection="0 1 0" Width="1"/>
                                        </Viewport3D.Camera>
                                        <ModelVisual3D>
                                            <ModelVisual3D.Content>
                                                <Model3DGroup>
                                                    <GeometryModel3D>
                                                        <GeometryModel3D.Geometry>
                                                            <MeshGeometry3D Positions="0,0,0 0,1,0 1,0,0 1,1,0" TextureCoordinates="0,1 0,0 1,1 1,0" TriangleIndices="0 2 1, 2 3 1"/>
                                                        </GeometryModel3D.Geometry>
                                                        <GeometryModel3D.Material>
                                                            <DiffuseMaterial Brush="{Binding [1]}"/>
                                                        </GeometryModel3D.Material>
                                                        <GeometryModel3D.Transform>
                                                            <MatrixTransform3D Matrix="0.002,0,0,0,-0.499,-0.498,0,-0.998,0,0,1,0,0.499,0.5,0,1"/>
                                                        </GeometryModel3D.Transform>
                                                    </GeometryModel3D>
                                                    <AmbientLight Color="White" />
                                                </Model3DGroup>
                                            </ModelVisual3D.Content>
                                        </ModelVisual3D>
                                    </Viewport3D>
                                </Canvas>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                </Canvas>

                <TextBlock Text="{Binding Message}" FontSize="40" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,150,0,0"/>
            </Grid>
        </Border>
    </DataTemplate>
</ResourceDictionary>